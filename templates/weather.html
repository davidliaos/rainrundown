<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Rain Rundown</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<div class="navbar">
  <a href="/cities" class="nav-item">üèôÔ∏è</a>
  <a href="/home" class="nav-item">üîç</a>
  <a href="/weather/random" class="nav-item">‚ùì</a>
</div>

<body>
 <div id= "background"> </div>
  <div class="container">
    
    <div class="city-container">
      <img src="http://openweathermap.org/img/wn/{{ weather.icon }}.png" alt="{{ weather.description }}" width="50px">
      <img src="https://flagsapi.com/{{ weather.country_code }}/flat/48.png" alt="Country Flag">
      <h1 contenteditable="true" onblur="location.href='/?city=' + this.innerText.toLowerCase().replace(/\b\w/g, function(l){ return l.toUpperCase(); })" onkeydown="handleEnterKey(event, this)">{{ city }}</h1>
      <button id="temperature-toggle" onclick="toggleTemperatureUnits()">¬∞C</button>
      <!-- save city button -->
      <button id="star-button" onclick="toggleStar()">
        <svg width="24" height="24" viewBox="0 0 24 24">
          <path id="star-path" d="M12 2l2.4 7.2h7.6l-6 4.8 2.4 7.2-6-4.8-6 4.8 2.4-7.2-6-4.8h7.6z" fill="none" stroke="currentColor" stroke-width="2"/>
        </svg>
      </button>

      <span id="temperature-units"></span>
    </div>
  </div>
  
  <script>
    function handleEnterKey(event, element) {
      if (event.key === "Enter") {
        event.preventDefault(); // Prevent the default behavior (newline)
        location.href = '/?city=' + element.innerText.toLowerCase().replace(/\b\w/g, function(l){ return l.toUpperCase(); });
      }
    }

    function searchCity() {
      var city = document.querySelector('h1').innerText.toLowerCase().replace(/\b\w/g, function(l){ return l.toUpperCase(); });
      location.href = '/?city=' + city;
    }
  </script>
  

    <div class="weather-info">
      <div class="weather-item">
        <div class="weather-label">Temperature:</div>
        <div class="weather-value-container">
            <span id="temperature-celsius" class="weather-value"></span>
            <span id="temperature-fahrenheit" class="weather-value" style="display:none"></span>
          </div>
        </div>
        <div class="weather-item">
          <div class="weather-label">Description:</div>
          <div class="weather-value"></div>
        </div>
        <div class="weather-item">
          <div class="weather-label">Feels Like:</div>
          <div class="weather-value-container">
            <span id="feels-like-celsius" class="weather-value"></span>
            <span id="feels-like-fahrenheit" class="weather-value" style="display:none"></span>
          </div>
        </div>
        <div class="weather-item">
          <div class="weather-label">Humidity:</div>
          <div class="weather-value"> </div>
        </div>
        <div class="weather-item">
          <div class="weather-label">Pressure:</div>
          <div class="weather-value"> </div>
        </div>
        <div class="weather-item">
          <div class="weather-label">Sunrise:</div>
          <div class="weather-value"> </div>
        </div>
        <div class="weather-item">
          <div class="weather-label">Cloudiness:</div>
          <div class="weather-value"> </div>
        </div>
        <div class="weather-item"> 
          <div class="weather-label">Wind Speed:</div> 
          <div class="weather-value"></div>
        </div>
        <div class="weather-item">
          <div class="weather-label">Sunset:</div> 
          <div class="weather-value"> </div>
        </div>
      </div>
    </div>
    <script>
      const city = "{{ city }}";
      var weather = "{{ weather_info }}";
      images = [
        "{{ url_for('static', filename='backgrounds/default.png') }}",
        "{{ url_for('static', filename='backgrounds/clear_skies.png') }}",
        "{{ url_for('static', filename='backgrounds/clear_sky.png') }}",
        "{{ url_for('static', filename='backgrounds/drizzle_rain.png') }}",
        "{{ url_for('static', filename='backgrounds/few_clouds.png') }}",
        "{{ url_for('static', filename='backgrounds/fog.png') }}",
        "{{ url_for('static', filename='backgrounds/heavy_rain.png') }}",
        "{{ url_for('static', filename='backgrounds/heavy_shower.png') }}",
        "{{ url_for('static', filename='backgrounds/light_rain.png') }}",
        "{{ url_for('static', filename='backgrounds/light_snow.png') }}",
        "{{ url_for('static', filename='backgrounds/mist.png') }}",
        "{{ url_for('static', filename='backgrounds/moderate_rain.png') }}",
        "{{ url_for('static', filename='backgrounds/scattered_clouds.png') }}",
        "{{ url_for('static', filename='backgrounds/thunderstorm.png') }}",
        "{{ url_for('static', filename='backgrounds/tornado.png') }}",
        "{{ url_for('static', filename='backgrounds/volcanic_ash.png') }}",
      ]
    </script>

    <script src="{{ url_for('static', filename='js/weather.js') }}"></script>
  </body>
  <!-- Add this right before the closing body tag -->
<div id="sidebar">
  <button id="sidebar-button" onclick="showSavedCities()">‚ò∞</button>
  <div id="saved-cities-dropdown" style="display: none;">
    <!-- Saved cities will be populated here -->
  </div>
</div>

</html>